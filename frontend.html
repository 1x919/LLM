<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>Steam éŠæˆ²èªæ„æœå°‹ï½œAI æ¨è–¦</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: "Segoe UI", "Noto Sans TC", sans-serif;
    }

    body {
      margin: 0;
      background: linear-gradient(120deg, #1e1e2f, #2a2a40);
      color: #f5f5f5;
      min-height: 100vh;
    }

    .container {
      max-width: 900px;
      margin: auto;
      padding: 60px 20px;
    }

    /* ===== Header ===== */
    .header {
      text-align: center;
      margin-bottom: 50px;
    }

    .header h1 {
      font-size: 2.6em;
      margin-bottom: 10px;
    }

    .header p {
      color: #cfcfe8;
      font-size: 1.1em;
    }

    /* ===== Question Box ===== */
    .question-box {
      background: #ffffff;
      color: #333;
      border-radius: 16px;
      padding: 30px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
    }

    .question-label {
      font-size: 1.2em;
      margin-bottom: 12px;
      font-weight: bold;
    }

    .question-input {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    input[type="text"] {
      flex: 1;
      padding: 14px 16px;
      font-size: 1em;
      border-radius: 10px;
      border: 1px solid #ccc;
      outline: none;
    }

    button {
      padding: 14px 22px;
      font-size: 1em;
      border-radius: 10px;
      border: none;
      background: #4f6df5;
      color: white;
      cursor: pointer;
      transition: background 0.2s ease;
    }

    button:hover {
      background: #3c55c8;
    }

    /* ===== Answer Area ===== */
    .answer-area {
      margin-top: 40px;
    }

    .answer-title {
      font-size: 1.5em;
      margin-bottom: 20px;
    }

    .loading {
      color: #ddd;
      font-style: italic;
    }

    .query-info {
      font-size: 0.95em;
      color: #bfc4ff;
      margin-bottom: 16px;
    }

    .card {
      background: #2f2f48;
      border-radius: 14px;
      padding: 20px;
      margin-bottom: 16px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.25);
    }

    .card-rank {
      font-size: 0.9em;
      color: #9aa4ff;
      margin-bottom: 6px;
    }

    .card-title {
      font-size: 1.2em;
      font-weight: bold;
      margin-bottom: 8px;
    }

    .card-score {
      font-size: 0.95em;
      color: #cfd3ff;
    }

    footer {
      text-align: center;
      margin-top: 80px;
      color: #aaa;
      font-size: 0.9em;
    }
  </style>
</head>
<body>

  <div class="container">

    <!-- ===== Header ===== -->
    <div class="header">
      <h1>ğŸ® Steam éŠæˆ² AI èªæ„æœå°‹</h1>
      <p>ç”¨ä¸€å¥è©±æè¿°ä½ æƒ³ç©çš„éŠæˆ²ï¼ŒAI å¹«ä½ æ‰¾æœ€é©åˆçš„ä½œå“</p>
    </div>

    <!-- ===== Question Box ===== -->
    <div class="question-box">
      <div class="question-label">
        â“ ä½ ç¾åœ¨æƒ³æ‰¾ä»€éº¼æ¨£çš„éŠæˆ²ï¼Ÿ
      </div>
      <div class="question-input">
        <input
          id="query"
          type="text"
          placeholder="ä¾‹å¦‚ï¼šé–‹æ”¾ä¸–ç•Œã€ç”Ÿå­˜ã€å¯ä»¥è‡ªå·±è£½ä½œè£å‚™çš„å–®äººéŠæˆ²"
        />
        <button onclick="search()">è©¢å• AI</button>
      </div>
    </div>

    <!-- ===== Answer Area ===== -->
    <div class="answer-area" id="answerArea">
      <!-- å‹•æ…‹çµæœ -->
    </div>

    <footer>
      æœ¬ç³»çµ±ä½¿ç”¨ SentenceTransformer + FAISS å»ºç«‹èªæ„æœå°‹æ¨¡å‹
    </footer>

  </div>

  <script>
    async function search() {
      const query = document.getElementById("query").value.trim();
      const area = document.getElementById("answerArea");

      if (!query) {
        area.innerHTML = "<div class='loading'>è«‹å…ˆè¼¸å…¥ä½ çš„å•é¡Œã€‚</div>";
        return;
      }

      area.innerHTML = "<div class='loading'>ğŸ¤– AI æ­£åœ¨åˆ†æä½ çš„éœ€æ±‚ï¼Œè«‹ç¨å€™â€¦</div>";

      try {
        const res = await fetch("http://127.0.0.1:8000/search", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            query: query,
            top_k: 5
          })
        });

        const data = await res.json();

        let html = `
          <div class="answer-title">âœ… AI ç‚ºä½ æ¨è–¦ä»¥ä¸‹éŠæˆ²ï¼š</div>
          <div class="query-info">
            åŸå§‹å•é¡Œï¼š${data.query_original}<br/>
            å¯¦éš›æœå°‹èªæ„ï¼š<b>${data.query_used}</b>
          </div>
        `;

        data.results.forEach(item => {
          html += `
            <div class="card">
              <div class="card-rank">æ¨è–¦é †ä½ #${item.rank}</div>
              <div class="card-title">${item.name}</div>
              <div class="card-score">
                ç¶œåˆç›¸ä¼¼åº¦åˆ†æ•¸ï¼š${item.score.toFixed(3)}
              </div>
            </div>
          `;
        });

        area.innerHTML = html;

      } catch (err) {
        area.innerHTML = "<div class='loading'>âŒ ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¢ºèªå¾Œç«¯æ˜¯å¦å•Ÿå‹•ã€‚</div>";
        console.error(err);
      }
    }
  </script>

</body>
</html>
